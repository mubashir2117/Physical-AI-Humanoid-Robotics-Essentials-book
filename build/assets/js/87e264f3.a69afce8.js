"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[370],{963:(e,n,a)=>{a.d(n,{A:()=>s});a(6540);var t=a(4164);const o={callout:"callout_jYHE",info:"info_IOty",tip:"tip_s2nh",caution:"caution_w7Js",danger:"danger_zfsw",icon:"icon_Ghiv",content:"content_JMk4"};var i=a(4848);function s({type:e,children:n}){const a=function(e){switch(e){case"info":default:return"\u2139\ufe0f";case"tip":return"\ud83d\udca1";case"caution":return"\u26a0\ufe0f";case"danger":return"\u274c"}}(e),s=(0,t.A)("callout",o.callout,o[e]);return(0,i.jsxs)("div",{className:s,children:[(0,i.jsx)("div",{className:o.icon,children:a}),(0,i.jsx)("div",{className:o.content,children:n})]})}},1724:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>_});const t=JSON.parse('{"id":"module-3-isaac/chapter-15-nav2","title":"Chapter 15 - Nav2","description":"Learning Objectives","source":"@site/docs/module-3-isaac/chapter-15-nav2.mdx","sourceDirName":"module-3-isaac","slug":"/module-3-isaac/chapter-15-nav2","permalink":"/physical-ai-robotics-book/docs/module-3-isaac/chapter-15-nav2","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Muhammad Uzair","lastUpdatedAt":1765045729000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Chapter 15 - Nav2"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 14 - Isaac ROS","permalink":"/physical-ai-robotics-book/docs/module-3-isaac/chapter-14-isaac-ros"},"next":{"title":"Chapter 16 - LLMs and Robotics","permalink":"/physical-ai-robotics-book/docs/module-4-vla/chapter-16-llms-and-robotics"}}');var o=a(4848),i=a(8453),s=a(963);const r={sidebar_position:5,title:"Chapter 15 - Nav2"},l="Chapter 15: Navigation 2 (Nav2) with Isaac",c={},_=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Content with Code Examples",id:"content-with-code-examples",level:2},{value:"Mermaid Diagrams",id:"mermaid-diagrams",level:2},{value:"Callouts",id:"callouts",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"chapter-15-navigation-2-nav2-with-isaac",children:"Chapter 15: Navigation 2 (Nav2) with Isaac"})}),"\n",(0,o.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(n.p,{children:"After completing this chapter, you should be able to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Configure Nav2 for simulation and real-world deployment"}),"\n",(0,o.jsx)(n.li,{children:"Integrate Nav2 with Isaac platform for enhanced navigation"}),"\n",(0,o.jsx)(n.li,{children:"Optimize navigation parameters for different environments"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"content-with-code-examples",children:"Content with Code Examples"}),"\n",(0,o.jsx)(n.p,{children:"Navigation 2 (Nav2) is the navigation stack for ROS 2, providing path planning, path execution, and obstacle avoidance capabilities for mobile robots."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'# Example Nav2 configuration file (nav2_params.yaml)\namcl:\n  ros__parameters:\n    use_sim_time: True\n    alpha1: 0.2\n    alpha2: 0.2\n    alpha3: 0.2\n    alpha4: 0.2\n    alpha5: 0.2\n    base_frame_id: "base_footprint"\n    beam_skip_distance: 0.5\n    beam_skip_error_threshold: 0.9\n    beam_skip_threshold: 0.3\n    do_beamskip: false\n    global_frame_id: "map"\n    lambda_short: 0.1\n    laser_likelihood_max_dist: 2.0\n    max_beams: 60\n    max_particles: 2000\n    min_particles: 500\n    odom_frame_id: "odom"\n    pf_err: 0.05\n    pf_z: 0.99\n    recovery_alpha_fast: 0.0\n    recovery_alpha_slow: 0.0\n    resolution: 0.05\n    robot_model_type: "nav2_amcl::DifferentialMotionModel"\n    save_pose_rate: 0.5\n    sigma_hit: 0.2\n    tf_broadcast: true\n    transform_timeout: 1.0\n    update_min_a: 0.2\n    update_min_d: 0.2\n    z_hit: 0.5\n    z_max: 0.05\n    z_rand: 0.5\n    z_short: 0.05\n\nbt_navigator:\n  ros__parameters:\n    use_sim_time: True\n    global_frame: map\n    robot_base_frame: base_link\n    odom_topic: /odom\n    bt_loop_duration: 10\n    default_server_timeout: 20\n    # Specify the path where the BT XML files are located\n    plugin_lib_names:\n    - nav2_compute_path_to_pose_action_bt_node\n    - nav2_compute_path_through_poses_action_bt_node\n    - nav2_follow_path_action_bt_node\n    - nav2_spin_action_bt_node\n    - nav2_wait_action_bt_node\n    - nav2_back_up_action_bt_node\n    - nav2_drive_on_heading_bt_node\n    - nav2_clear_costmap_service_bt_node\n    - nav2_is_stuck_condition_bt_node\n    - nav2_have_remaining_waypoints_condition_bt_node\n    - nav2_is_path_valid_condition_bt_node\n    - nav2_initial_pose_received_condition_bt_node\n    - nav2_reinitialize_global_localization_service_bt_node\n    - nav2_rate_controller_bt_node\n    - nav2_distance_controller_bt_node\n    - nav2_speed_controller_bt_node\n    - nav2_truncate_path_action_bt_node\n    - nav2_goal_updater_node_bt_node\n    - nav2_recovery_node_bt_node\n    - nav2_pipeline_sequence_bt_node\n    - nav2_round_robin_node_bt_node\n    - nav2_transform_available_condition_bt_node\n    - nav2_time_expired_condition_bt_node\n    - nav2_path_expiring_timer_condition\n    - nav2_distance_traveled_condition_bt_node\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Example Nav2 behavior tree customization for Isaac\nimport rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom nav2_msgs.action import NavigateToPose\nfrom geometry_msgs.msg import PoseStamped\nfrom std_msgs.msg import String\nimport math\n\nclass IsaacNav2Controller(Node):\n    def __init__(self):\n        super().__init__(\'isaac_nav2_controller\')\n        \n        # Create action client for navigation\n        self.nav_to_pose_client = ActionClient(\n            self, \n            NavigateToPose, \n            \'navigate_to_pose\'\n        )\n        \n        # Publisher for status\n        self.status_pub = self.create_publisher(String, \'nav_status\', 10)\n        \n        # Timer to send navigation goals\n        self.timer = self.create_timer(10.0, self.send_navigation_goal)\n        \n        # Waypoints to navigate to\n        self.waypoints = [\n            [2.0, 0.0, 0.0],  # x, y, theta\n            [2.0, 2.0, 1.57], \n            [0.0, 2.0, 3.14],\n            [0.0, 0.0, 0.0]   # Return to start\n        ]\n        self.current_waypoint = 0\n\n    def send_navigation_goal(self):\n        """Send a navigation goal to Nav2"""\n        if not self.nav_to_pose_client.wait_for_server(timeout_sec=1.0):\n            self.get_logger().error(\'Navigation action server not available\')\n            return\n\n        goal_msg = NavigateToPose.Goal()\n        goal_msg.pose = PoseStamped()\n        goal_msg.pose.header.frame_id = \'map\'\n        goal_msg.pose.header.stamp = self.get_clock().now().to_msg()\n        \n        # Set the target pose\n        waypoint = self.waypoints[self.current_waypoint]\n        goal_msg.pose.pose.position.x = waypoint[0]\n        goal_msg.pose.pose.position.y = waypoint[1]\n        goal_msg.pose.pose.position.z = 0.0\n        \n        # Convert theta to quaternion\n        theta = waypoint[2]\n        goal_msg.pose.pose.orientation.z = math.sin(theta / 2.0)\n        goal_msg.pose.pose.orientation.w = math.cos(theta / 2.0)\n\n        # Send the goal\n        self.nav_to_pose_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback\n        ).add_done_callback(self.goal_response_callback)\n        \n        self.get_logger().info(f\'Sent navigation goal to waypoint {self.current_waypoint}: {waypoint}\')\n        \n        # Update waypoint index\n        self.current_waypoint = (self.current_waypoint + 1) % len(self.waypoints)\n\n    def goal_response_callback(self, future):\n        """Handle response from navigation server"""\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info(\'Navigation goal rejected\')\n            return\n\n        self.get_logger().info(\'Navigation goal accepted\')\n        result_future = goal_handle.get_result_async()\n        result_future.add_done_callback(self.get_result_callback)\n\n    def get_result_callback(self, future):\n        """Handle navigation result"""\n        result = future.result().result\n        self.get_logger().info(f\'Navigation result: {result}\')\n\n    def feedback_callback(self, feedback_msg):\n        """Handle navigation feedback"""\n        feedback = feedback_msg.feedback\n        # Publish navigation status\n        status_msg = String()\n        status_msg.data = f\'Navigating: {feedback.current_pose.pose.position.x:.2f}, {feedback.current_pose.pose.position.y:.2f}\'\n        self.status_pub.publish(status_msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    controller = IsaacNav2Controller()\n    \n    try:\n        rclpy.spin(controller)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        controller.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,o.jsx)(n.h2,{id:"mermaid-diagrams",children:"Mermaid Diagrams"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-mermaid",children:"graph TD;\n    A[Nav2 Stack] --\x3e B[Global Planner]\n    A --\x3e C[Local Planner]\n    A --\x3e D[Controller]\n    A --\x3e E[Behavior Tree]\n    B --\x3e F[A* / Dijkstra]\n    C --\x3e G[TEB / DWA]\n    D --\x3e H[PID / MPC]\n    E --\x3e I[Recovery Behaviors]\n    J[Isaac Perception] --\x3e A\n    K[Isaac Mapping] --\x3e A\n    L[Sensor Data] --\x3e J\n    M[Odometry] --\x3e A\n"})}),"\n",(0,o.jsx)(n.h2,{id:"callouts",children:"Callouts"}),"\n",(0,o.jsx)(s.A,{type:"info",children:(0,o.jsx)(n.p,{children:"Nav2 uses behavior trees to implement complex navigation behaviors, allowing for flexible and robust navigation strategies."})}),"\n",(0,o.jsx)(s.A,{type:"tip",children:(0,o.jsx)(n.p,{children:"When using Nav2 with Isaac, leverage Isaac's sensor simulation and mapping capabilities to create realistic test scenarios."})}),"\n",(0,o.jsx)(s.A,{type:"caution",children:(0,o.jsx)(n.p,{children:"Navigation parameters need to be tuned for specific robots and environments. Start with simulation before applying to real robots."})}),"\n",(0,o.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Configure Nav2 for a robot in Isaac Sim environment"}),"\n",(0,o.jsx)(n.li,{children:"Implement custom behavior tree nodes for specific navigation tasks"}),"\n",(0,o.jsx)(n.li,{children:"Tune navigation parameters for different types of environments"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Nav2 provides comprehensive navigation capabilities for ROS 2"}),"\n",(0,o.jsx)(n.li,{children:"Behavior trees enable complex navigation behaviors"}),"\n",(0,o.jsx)(n.li,{children:"Integration with Isaac enhances simulation and testing"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>r});var t=a(6540);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);